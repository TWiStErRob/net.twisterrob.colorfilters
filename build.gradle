apply plugin: 'net.twisterrob.root'
apply plugin: 'net.twisterrob.quality'

allprojects {
	apply plugin: 'net.twisterrob.quality'
}

allprojects { project ->

	project.plugins.all {
		if (it instanceof com.android.build.gradle.BasePlugin) {
			project.android {

				defaultConfig {
					minSdkVersion 14
				}

				lintOptions {
					warningsAsErrors = true
					// REPORT this is not working in AS
					// workaround? java.nio.file.Files.createSymbolicLink in settings.gradle
					lintConfig = rootProject.file('config/lint/lint.xml')
					def cleanPath = project.path.substring(1).replace(':', '+')
					baselineFile = rootProject.file("config/lint/baseline ${cleanPath}.xml")
				}
			}
		}
	}
}

task clean(type: Delete) {
	delete rootProject.buildDir
}
