name: "ðŸ§ª Instrumentation Test Matrix"

on:
  workflow_call

jobs:

  instrumentation:
    name: "${{ matrix.api }}"

    uses: TWiStErRob/github-workflows/.github/workflows/instrumentation.yml@4448310065082fc1214be4271eb3dcf133d01cf6 # v1
    with:
      android-api: ${{ matrix.api }}
      script: >
        ./gradlew
        --no-daemon
        --no-build-cache
        --continue
        --stacktrace
        --scan
        connectedCheck
        mergeAndroidReports
      junit5: true

    strategy:
      fail-fast: false
      matrix:
        # The API level, see https://apilevels.com/.
        api:
          #- 15 # Doesn't work with JUnit 5!
          #- 21 # Doesn't work with JUnit 5!
          #- 23 # Doesn't work with JUnit 5!
          #- 26
          - 29
          #- 32
          #- 33
